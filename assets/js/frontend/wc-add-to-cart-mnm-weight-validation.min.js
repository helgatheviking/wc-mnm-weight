/*! WooCommerce Mix and Match Products - By Weight 1.2.0 2020-11-18 12:21 */

!function(i){function a(t){var m=this;this.container=t,this.$form=t.$mnm_form,this.initialize=function(){"weight"===t.$mnm_cart.data("validation_mode")&&(this.add_counter_div(),this.bind_event_handlers())},this.add_counter_div=function(){this.container.$mnm_cart.find(".wc-mnm-weight-counter").length||i('<div class="wc-mnm-weight-counter"></div>').insertBefore(this.container.$mnm_price),this.$counter=this.container.$mnm_cart.find(".wc-mnm-weight-counter")},this.bind_event_handlers=function(){this.$form.on("wc-mnm-container-quantities-updated",this.update_totals),this.$form.on("wc-mnm-validation",this.validate)},this.update_totals=function(t,e){var a=0;i.each(e.child_items,function(t,e){var i=e.$self.find(".product-weight").data("weight");void 0===i&&(i=0),i=parseFloat(i),a+=e.get_quantity()*i}),e.$mnm_cart.data("total_weight",a)},this.validate=function(t,e){e.reset_messages();var i=e.$mnm_cart.data("total_weight");void 0===i&&(i=0);var a=e.$mnm_cart.data("min_weight"),n=e.$mnm_cart.data("max_weight"),_="";a===n&&i!==a?_=wc_mnm_weight_params.i18n_qty_error.replace("%s",m.get_formatted_weight(a)):0<n&&0<a&&(i<a||n<i)?_=wc_mnm_weight_params.i18n_min_max_qty_error.replace("%max",m.get_formatted_weight(n)).replace("%min",m.get_formatted_weight(a)):0<a&&i<a?_=wc_mnm_weight_params.i18n_min_weight_error.replace("%min",m.get_formatted_weight(a)):0<n&&n<i&&(_=wc_mnm_weight_params.i18n_max_weight_error.replace("%max",m.get_formatted_weight(n))),""!==_?(n=m.selected_weight_message(i),e.add_message(_.replace("%v",n),"error")):!1===e.api.get_max_container_size()&&e.add_message(m.selected_weight_message(i))},this.get_formatted_weight=function(t){var e=wc_mnm_weight_params.weight_unit;return wc_mnm_weight_params.i18n_weight_format.replace("%w",parseFloat(t)).replace("%u",e)},this.selected_weight_message=function(t){return wc_mnm_weight_params.i18n_qty_message.replace("%s",m.get_formatted_weight(t))}}i("body").on("wc-mnm-initializing",function(t,e){new a(e).initialize()})}(jQuery);